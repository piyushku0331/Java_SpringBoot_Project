spring.application.name=springboot_project_backend
spring.profiles.active=${SPRING_PROFILES_ACTIVE:dev}

# Database Configuration - MySQL
spring.datasource.url=${DATABASE_URL:jdbc:mysql://localhost:3306/banking_db?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.datasource.username=${DB_USERNAME:root}
spring.datasource.password=${DB_PASSWORD:defaultpassword}

# HikariCP Connection Pool Tuning for Performance
spring.datasource.hikari.maximum-pool-size=${HIKARI_MAX_POOL_SIZE:20}
spring.datasource.hikari.minimum-idle=${HIKARI_MIN_IDLE:10}
spring.datasource.hikari.connection-timeout=${HIKARI_CONNECTION_TIMEOUT:30000} # 30 seconds
spring.datasource.hikari.idle-timeout=${HIKARI_IDLE_TIMEOUT:600000} # 10 minutes

# JPA Configuration
# WARNING: Using 'update' for ddl-auto is not recommended for production.
# Use 'validate' and a database migration tool like Flyway or Liquibase.
spring.jpa.hibernate.ddl-auto=${JPA_DDL_AUTO:validate}
spring.jpa.show-sql=${JPA_SHOW_SQL:false}
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
spring.jpa.properties.hibernate.format_sql=${JPA_FORMAT_SQL:false}

# Hibernate Second-Level (L2) Cache Configuration for Performance
spring.jpa.properties.hibernate.cache.use_second_level_cache=true
spring.jpa.properties.hibernate.cache.use_query_cache=true
spring.jpa.properties.hibernate.cache.region.factory_class=org.hibernate.cache.jcache.JCacheRegionFactory
spring.cache.jcache.config=classpath:ehcache.xml

# Disable SQL script initialization
spring.sql.init.mode=never

# Server Configuration
server.port=${PORT:8080}

# JWT Configuration
# The JWT secret MUST be set via an environment variable for security.
jwt.secret=${JWT_SECRET}
jwt.expiration.ms=${JWT_EXPIRATION_MS:86400000} # 24 hours by default

# CORS Configuration
spring.web.cors.allowed-origins=${ALLOWED_ORIGINS:http://localhost:3000}
spring.web.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
spring.web.cors.allowed-headers=*
spring.web.cors.allow-credentials=true

# Logging Configuration
logging.level.com.piyushku.banking=${LOG_LEVEL:INFO}
logging.level.org.springframework.security=${SECURITY_LOG_LEVEL:WARN}

# Actuator Configuration
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=when-authorized
